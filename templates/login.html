{% extends "base.html" %}

{% block customCSS %}

    h2,h3{color: #777;}

    .form-control {
    background-color: rgba(0,0,0,0.8) !important;
    height: 35px;
    font-size: 18px;
    color: white;
    border: none;
    }

    .search {
    height: 40px;
    font-size: 18px;
    }

    .pushDown {
    margin-bottom: 10px;
    }

    .transparentClass {
    background-color: rgba(0,0,0,0.9);
    color: white;
    max-height: 40px !important;
    height: 40px;
    border: none;
    }

    .transparentClassRegister {
    background-color: rgba(0,0,0,0.9);
    color: white;
    border: none;
    height: 25px;
    font-size: 16px;
    }

    input::-webkit-input-placeholder {
    color: white !important;
    opacity: 0.8 !important;
    }

    .pac-container {
    background-color: #FFF;
    z-index: 20;
    position: fixed;
    display: inline-block;
    float: left;
    }
    .modal{
    z-index: 20;
    }
    .modal-backdrop{
    z-index: 10;
    }​

    @-webkit-keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
    -webkit-transform: translateY(0);
    transform: translateY(0);
    }
    40% {
    -webkit-transform: translateY(-30px);
    transform: translateY(-30px);
    }
    60% {
    -webkit-transform: translateY(-15px);
    transform: translateY(-15px);
    }
    }

    @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
    -ms-transform: translateY(0);
    transform: translateY(0);
    }
    40% {
    -ms-transform: translateY(-30px);
    transform: translateY(-30px);
    }
    60% {
    -ms-transform: translateY(-15px);
    transform: translateY(-15px);
    }
    }

    .arrow {
    position: fixed;
    left: 50%;
    bottom: 0;
    margin-left:-20px;
    width: 40px;
    height: 40px;
    background-image:
    url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yOTMuNzUxLDQ1NS44NjhjLTIwLjE4MSwyMC4xNzktNTMuMTY1LDE5LjkxMy03My42NzMtMC41OTVsMCwwYy0yMC41MDgtMjAuNTA4LTIwLjc3My01My40OTMtMC41OTQtNzMuNjcyICBsMTg5Ljk5OS0xOTBjMjAuMTc4LTIwLjE3OCw1My4xNjQtMTkuOTEzLDczLjY3MiwwLjU5NWwwLDBjMjAuNTA4LDIwLjUwOSwyMC43NzIsNTMuNDkyLDAuNTk1LDczLjY3MUwyOTMuNzUxLDQ1NS44Njh6Ii8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMjIwLjI0OSw0NTUuODY4YzIwLjE4LDIwLjE3OSw1My4xNjQsMTkuOTEzLDczLjY3Mi0wLjU5NWwwLDBjMjAuNTA5LTIwLjUwOCwyMC43NzQtNTMuNDkzLDAuNTk2LTczLjY3MiAgbC0xOTAtMTkwYy0yMC4xNzgtMjAuMTc4LTUzLjE2NC0xOS45MTMtNzMuNjcxLDAuNTk1bDAsMGMtMjAuNTA4LDIwLjUwOS0yMC43NzIsNTMuNDkyLTAuNTk1LDczLjY3MUwyMjAuMjQ5LDQ1NS44Njh6Ii8+DQo8L3N2Zz4=);
    background-size: contain;
    }

    .bounce {
    -webkit-animation: bounce 2s infinite;
    animation: bounce 2s infinite;
    }

    .wallClock{
    position: absolute;
    opacity: 0.7;
    top: 70px;
    float: left;
    left: 130px;
    font-size: 85px;
    color: white;
    overflow: hidden;
    font-weight: 600;
    }


{% endblock %}

{% block content %}
    <header style="background-image: url('static/img/bg-front.jpg');">
        <div id="scroll_helper" class="arrow bounce"></div>
        <div id="txt" class="wallClock"></div>
        <div id="header" class="header-content">
            <div class="header-content-inner">
                <form id="searchForm" action="/place" method="GET">
                    <div class="col-md-12" style="padding-bottom: 20px">
                        <div class="input-group">
                         <span class="input-group-addon transparentClass"><i class="fa fa-cutlery fa-lg"
                                                                             aria-hidden="true"></i></span>
                            <input style="height: 60px; font-size: 25px" class="form-control" id="location" type="text"
                                   placeholder="Tell us your destination." required/>
                            <span style="border: 2px white; background-color: rgba(94, 184,92,0.93);cursor: pointer;"
                                  class="input-group-addon">
                                <input style="width: 100%; height: 100%; padding-right: 50px; border: 2px white; background-color: rgba(94, 184,92,0.0);padding-left: 50px; color: white; font-size: 28px;"
                                       type="submit" id="submit" value="GO"/></span>
                        </div>
                        <input type="hidden" id="location_id" name="place_id" value="">
                    </div>
                    <div style="opacity: 0.8 !important; padding-bottom: 5px;" class="col-md-4">
                        <div class="input-group">
                    <span class="input-group-addon transparentClass"><i class="fa fa-users fa-lg"
                                                                        aria-hidden="true"></i></span>
                            <select class="form-control search" id="numPeople" name="numPeople" required>
                                <option value="" disabled selected hidden>Number of People</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10+</option>
                            </select>
                        </div>
                    </div>
                    <div style="opacity: 0.8 !important; padding-bottom: 5px;" class="col-md-4">
                        <div class="input-group">
					<span class="input-group-addon transparentClass" id="basic-addon1"><i class="fa fa-calendar fa-lg"
                                                                                          aria-hidden="true"></i></span>
                            <input class="form-control search" id="date" value="2017-01-01" type="date" name="date"
                                   required/>
                        </div>
                    </div>
                    <div style="opacity: 0.8 !important; padding-bottom: 5px;" class="col-md-4">
                        <div class="input-group">
                    <span class="input-group-addon transparentClass"><i class="fa fa-clock-o fa-lg"
                                                                        aria-hidden="true"></i></span>
                            <select class="form-control search" tabindex="3" id="time" aria-label="hour" name="time"
                                    required>
                                <option value="" disabled selected hidden>Select Arrival Time</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="11:30">11:30 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="12:30">12:30 PM</option>
                                <option value="13:00">1:00 PM</option>
                                <option value="13:30">1:30 PM</option>
                                <option value="14:00">2:00 PM</option>
                                <option value="14:30">2:30 PM</option>
                                <option value="15:00">3:00 PM</option>
                                <option value="15:30">3:30 PM</option>
                                <option value="16:00">4:00 PM</option>
                                <option value="16:30">4:30 PM</option>
                                <option value="17:00">5:00 PM</option>
                                <option value="17:30">5:30 PM</option>
                                <option value="18:00">6:00 PM</option>
                                <option value="18:30">6:30 PM</option>
                                <option value="19:00">7:00 PM</option>
                                <option value="19:30">7:30 PM</option>
                                <option value="20:00">8:00 PM</option>
                                <option value="20:30">8:30 PM</option>
                                <option value="21:00">9:00 PM</option>
                                <option value="21:30">9:30 PM</option>
                                <option value="22:00">10:00 PM</option>
                                <option value="22:30">10:30 PM</option>
                                <option value="23:00">11:00 PM</option>
                                <option value="23:30">11:30 PM</option>
                            </select>
                        </div>
                    </div>
                </form>
                <div style="font-size: 18px; height: 80px; display: block; overflow:hidden;" class="col-md-12">
                    <div {% if not error %} hidden {% endif %} id="error_alert"
                                            class="alert alert-dismissable">
                        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        <strong id="err_strong_label">Oops!</strong> <span id="err_label">{{ error }}</span>
                    </div>

                </div>
            </div>
        </div>

    </header>
    <section style="background-color: white; padding: 30px;">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="service-box">
                        <i class="fa fa-4x fa-map-marker text-primary sr-icons" data-sr-id="3"
                           style="; visibility: visible;  -webkit-transform: scale(1); opacity: 1;transform: scale(1); opacity: 1;-webkit-transition: -webkit-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; transition: transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; "></i>
                        <h3>Find Location</h3>
                        <p class="text-muted">Find a nice Restaurant, Cafe or Bar. We will get your table arranged.</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="service-box">
                        <i class="fa fa-4x fa-cutlery text-primary sr-icons" data-sr-id="3"
                           style="; visibility: visible;  -webkit-transform: scale(1); opacity: 1;transform: scale(1); opacity: 1;-webkit-transition: -webkit-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; transition: transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; "></i>
                        <h3>Choose Food</h3>
                        <p class="text-muted">Take a look at the menu and create your order.</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="service-box">
                        <i class="fa fa-4x fa-paper-plane text-primary sr-icons" data-sr-id="4"
                           style="; visibility: visible;  -webkit-transform: scale(1); opacity: 1;transform: scale(1); opacity: 1;-webkit-transition: -webkit-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; transition: transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; "></i>
                        <h3>Order</h3>
                        <p class="text-muted">Let us know your arrival time, so nothing gets cold. </p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="service-box">
                        <i class="fa fa-4x fa-heart text-primary sr-icons" data-sr-id="5"
                           style="; visibility: visible;  -webkit-transform: scale(1); opacity: 1;transform: scale(1); opacity: 1;-webkit-transition: -webkit-transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; transition: transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s, opacity 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s; "></i>
                        <h3>Get Ready</h3>
                        <p class="text-muted">Enjoy your food, at the right time and at the right location.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="no-padding" id="portfolio">
        <div class="container-fluid">
            <div class="row no-gutter popup-gallery">
                <div class="col-lg-4 col-sm-6">
                    <img src="static/img/login/thumbs/1.jpg" class="img-responsive" alt="">
                </div>
                <div class="col-lg-8 col-sm-6">
                    <h1 style="padding: 5%"> Own a Restaurant, Café or Bar ? </h1>
                    <p> Register your shop to start creating your first online waiter service. EasyOrder allows hungry
                        people to select a restaurant they want to dine in,<br/> assigns them a table according to the
                        group size and lets them order their food in advance. Making everyone smile.
                        <br/> <br/>
                        <button style="font-size: 18px; font-weight: 200;" type="button" data-toggle="modal"
                                data-target="#myModal-restaurant-reg" id="shop_reg_modal_button"
                                class="btn btn-primary" autocomplete="off">
                            Register your Shop
                        </button>
                    </p>
                </div>
            </div>
        </div>
    </section>


    <!-- Modal -->
    <div class="modal fade" id="myModal-restaurant-reg" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1">
        <div class="modal-dialog modal-custom" role="document">
            <div style="background-color:rgba(239, 239, 239, 0.9);" class="modal-content">
                <div class="modal-body">
                    <h2>Please fill in the details.</h2>
                    <br/>
                    <form method="post" action=".">
                        {% csrf_token %}
                        {{ form_reg }}
                        <br/>
                        <input type="submit" class="btn btn-primary" value="Register Shop"/>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block footerscripts %}
    <script>

        var is_searching = false;

        $("#submit").click(function (event) {

            is_searching = true;
            var err = "Looks like you forgot to select ";
            var err1, err2, is_err = false;

            if ($('#numPeople').val() === null) {
                err += "the number of people";
                is_err = true;
                err1 = true;
            }
            if ($('#time').val() === null) {
                if (err1) {
                    err += " and ";
                }
                err += "the time of your booking";
                is_err = true;
                err2 = true;
            }
            if (is_err) {
                $("#error_alert").css("background-color", "");
                $("#error_alert").css({
                    'background-color': "rgba(184,143,17,0.70)",
                    'color': "white",
                    'border': "2px white",
                    'margin-top': "10px"
                });
                if (!err1) {
                    $("#err_strong_label").html("Oow");
                } else {
                    $("#err_strong_label").html("Ahh");
                }

                $("#err_label").html(err + ".");
                $("#error_alert").slideDown("slow");

                $('#time').on('change', function () {
                    $("#error_alert").slideUp("slow");
                });
                $('#numPeople').on('change', function () {
                    $("#error_alert").slideUp("slow");
                });

            }
        });

        function startTime() {
            var today = new Date();
            var h = today.getHours();
            var m = today.getMinutes();
            var s = today.getSeconds();
            m = checkTime(m);
            s = checkTime(s);
            document.getElementById('txt').innerHTML =
                h + ":" + m;
            var t = setTimeout(startTime, 500);
        }
        function checkTime(i) {
            if (i < 10) {
                i = "0" + i
            }
            ;  // add zero in front of numbers < 10
            return i;
        }

        {% if not error %}

            $(document).ready(function () {

                startTime();

                if (!is_searching) {
                    setTimeout(function () {
                        if (!$('#location').is(':focus') && $('#location').val() === "" && !is_searching) {

                            $("#error_alert").css("background-color", "");
                            $("#error_alert").css({
                                'background-color': "rgba(38,184,20,0.70)",
                                'color': "white",
                                'border': "2px white",
                                'margin-top': "10px"
                            });
                            $("#err_strong_label").html("Hey!");
                            $("#err_label").html("Start typing the name of a restaurant to get started.");
                            $("#error_alert").slideDown("slow");

                            $('#location').focus(function () {
                                if (!is_searching) {
                                    $("#error_alert").slideUp("fast");
                                }
                            });
                            setTimeout(function () {

                                if (!is_searching) {
                                    $("#error_alert").slideUp("fast");

                                    setTimeout(function () {
                                        if (!is_searching) {
                                            $("#err_strong_label").html("");
                                            $("#err_label").html("Once you decide where to eat, select the date, time and number of your people then hit GO.");
                                            $("#error_alert").slideDown("slow");

                                            $('#location').focus(function () {
                                                if (!is_searching) {
                                                    $("#error_alert").slideUp("fast");
                                                }
                                            });
                                        }
                                    }, 1000);
                                }
                            }, 6500);

                        }
                    }, 2000);
                }
            });

        {% endif %}

        {% if error %}
            $(document).ready(function () {
                $("#error_alert").css({
                    'background-color': "rgba(184,53,22,0.7)",
                    'color': "white",
                    'border': "2px white",
                    'margin-top': "10px"
                });
                $("#error_alert").slideDown();
            });
        {% endif %}

        $(window).bind('mousewheel', function (event) {
            if (!event.originalEvent.wheelDelta >= 0) {
                $("#scroll_helper").hide();
            }
        });

        // Set current date
        document.getElementById('date').value = new Date().toJSON().slice(0, 10);
        // Show current time only
        var date = new Date();
        var cTime = ( date.getHours() + '' + date.getMinutes());
        $("#time option").each(function () {
            var sTime = $(this).val().replace(":", "");
            if ((sTime < cTime)) {
                $(this).hide();
                $('#date').change(function () {
                    $("#time option").each(function () {
                        var sTime = $(this).val().replace(":", "");
                        if ((sTime < cTime)) {
                            $(this).show();
                        }
                    });
                });
            }
        });


        $('#location').keydown(function (e) {
            if (e.which == 13 && $('.pac-container:visible').length) return false;
        });

        // Restaurant search
        function initSearch() {
            var input = (document.getElementById('location'));
            var options = {
                types: ['establishment']
            };

            var autocomplete = new google.maps.places.Autocomplete(input, options);
            autocomplete.addListener('place_changed', function () {

                var place = autocomplete.getPlace();
                $("#location_id").val(place.place_id);
            });
        }

        // Reg_place search
        function initSearchRestaurantRegister() {
            var input = (document.getElementById('reg_location'));
            var options = {
                types: ['establishment']
            };

            var autocomplete = new google.maps.places.Autocomplete(input, options);
            autocomplete.addListener('place_changed', function () {
                var place = autocomplete.getPlace();
                $("#location_id_reg").val(place.place_id);
            });
        }

        $("#shop_reg_modal_button").click(function () {
            initSearchRestaurantRegister();
        });


    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBCinQHLTxOHgFXAFHjsftWjucn2cI3yWg&libraries=places&callback=initSearch"
            async defer>
    </script>
{% endblock %}
